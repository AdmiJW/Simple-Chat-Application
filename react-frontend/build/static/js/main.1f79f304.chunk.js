(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{92:function(e,t,n){},93:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(47),a=n.n(r),i=n(16),o=n(0);var l=function(){return Object(o.jsxs)("nav",{className:"font-tourney bg-gray-800 text-white padded-container py-3 px-1 flex justify-between items-center text-4xl",children:[Object(o.jsxs)(i.b,{to:"/",className:"flex items-center",children:[Object(o.jsx)("p",{className:"mr-3",children:"Chat Now"}),Object(o.jsx)("svg",{className:"w-7 h-7 ",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"})})]}),Object(o.jsx)("a",{href:"https://github.com/AdmiJW/Simple-Chat-Application",target:"_blank",rel:"noreferrer noopener",children:Object(o.jsx)("svg",{className:"w-8 h-8",fill:"white",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(o.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})})]})},d=n(6),u=n(2);var m=function(){var e=Object(u.f)(),t=Object(s.useState)(""),n=Object(d.a)(t,2),c=n[0],r=n[1],a=Object(s.useState)(""),i=Object(d.a)(a,2),l=i[0],m=i[1];return Object(o.jsxs)("main",{className:"flex-grow flex flex-col justify-center items-center",children:[Object(o.jsxs)("div",{className:"flex flex-row justify-center items-center flex-wrap my-4",children:[Object(o.jsx)("h1",{className:"font-tourney font-medium text-center text-6xl md:text-8xl mx-4",children:"CHAT NOW"}),Object(o.jsx)("svg",{className:"w-20 h-20 sm:ml-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M18 5v8a2 2 0 01-2 2h-5l-5 4v-4H4a2 2 0 01-2-2V5a2 2 0 012-2h12a2 2 0 012 2zM7 8H5v2h2V8zm2 0h2v2H9V8zm6 0h-2v2h2V8z",clipRule:"evenodd"})})]}),l&&Object(o.jsx)("div",{className:"px-3 py-2 my-3 text-md text-white bg-red-500 rounded-lg shadow",children:l}),Object(o.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),m(""),c.length>20||c.length<3)return m("Username must be of length 3-20 long!");e.push("/chat/".concat(c))},children:[Object(o.jsx)("input",{type:"text",className:"w-72 md:w-96 rounded-lg border-4 border-gray-400 px-2 py-1 text-2xl",name:"username",id:"username",placeholder:"Username",value:c,onChange:function(e){return r(e.target.value)}}),Object(o.jsx)("button",{type:"submit",id:"username-submit",className:"block px-4 py-3 my-5 mx-auto bg-blue-400 rounded-lg shadow-md transition transform hover:bg-blue-500 hover:scale-110",children:Object(o.jsxs)("svg",{className:"w-6 h-6",fill:"white",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:[Object(o.jsx)("path",{fillRule:"evenodd",d:"M10.293 15.707a1 1 0 010-1.414L14.586 10l-4.293-4.293a1 1 0 111.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"}),Object(o.jsx)("path",{fillRule:"evenodd",d:"M4.293 15.707a1 1 0 010-1.414L8.586 10 4.293 5.707a1 1 0 011.414-1.414l5 5a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0z",clipRule:"evenodd"})]})})]})]})};var j=function(e){var t=e.username,n=e.emit_Message,c=e.emit_On_Typing_Event,r=e.setIsMobileViewOpen,a=Object(s.useState)(""),i=Object(d.a)(a,2),l=i[0],u=i[1];return Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(l),u("")},className:"flex text-lg md:text-xl z-30 relative",id:"chatbox",children:[Object(o.jsx)("button",{type:"button",onClick:function(){return r((function(e){return!e}))},className:"absolute md:hidden right-4 -top-20 p-2 bg-blue-500 hover:bg-blue-600 rounded-full shadow-md",children:Object(o.jsx)("svg",{className:"w-10 h-10",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})})}),Object(o.jsx)("input",{type:"text",placeholder:t+":",value:l,onChange:function(e){u(e.target.value),c()},className:"flex-grow shadow-inner px-3 py-2 border-2 border-gray-300 rounded-t-md",disabled:void 0===n}),Object(o.jsx)("button",{type:"submit",id:"chatbox__send",className:"bg-blue-600 px-3 rounded-t-md hover:bg-blue-700",disabled:void 0===n,children:Object(o.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"white",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})};var x=function(e){var t=e.message,n=t.isSelf,s=t.username,c=t.date,r=t.text;c=new Date(c).toLocaleString();var a="my-2 px-3 py-2 bg-opacity-60 rounded-lg shadow-lg bg-green-200 "+(n?"border-green-400 border-4":"border-green-200 border-2");return Object(o.jsxs)("div",{className:a,children:[Object(o.jsxs)("div",{className:"flex justify-between flex-wrap ",children:[Object(o.jsx)("p",{className:"font-bold text-md",children:s}),Object(o.jsx)("p",{className:"font-light text-sm text-gray-600",children:c})]}),Object(o.jsx)("p",{className:"",children:r})]})};var b=function(e){var t=e.message,n=t.username,s=t.text;return Object(o.jsxs)("div",{className:"my-2 px-3 py-2 border-2 bg-opacity-60 opacity-50 rounded-lg shadow-lg bg-yellow-200 border-yellow-200",children:[Object(o.jsxs)("p",{className:"font-bold text-md",children:[n," (Sending...)"]}),Object(o.jsx)("p",{className:"",children:s})]})};var p=function(e){var t=e.peopleThatAreTyping,n=t.length>3?"Multiple people are typing...":3===t.length?"".concat(t[0],", ").concat(t[1]," and ").concat(t[2]," are typing..."):2===t.length?"".concat(t[0]," and ").concat(t[1]," are typing..."):"".concat(t[0]," are typing...");return Object(o.jsx)("div",{className:"self-center my-4 px-3 py-2 border-2 bg-opacity-80 rounded-lg shadow-lg bg-gray-400 border-gray-400 text-sm font-medium text-center",children:n})};var h=function(e){var t=e.messages,n=e.pendingMessages,s=e.peopleThatAreTyping;return Object(o.jsxs)("section",{className:"flex-grow px-3 py-2 flex flex-col overflow-y-auto",children:[t.map((function(e){return Object(o.jsx)(x,{message:e},e.date.getTime())})),n.map((function(e){return Object(o.jsx)(b,{message:e},e.date.getTime())})),s.length?Object(o.jsx)(p,{peopleThatAreTyping:s}):""]})};var f=function(e){var t=e.onlineUsers;return Object(o.jsx)("ul",{className:"flex-grow overflow-y-auto flex flex-col mx-6 md:mx-2",children:t.map((function(e){return Object(o.jsx)("li",{children:Object(o.jsx)("p",{className:"rounded-md bg-gray-100 text-lg my-1 p-2",children:e})},e)}))})};var g=function(e){var t=e.connectionMessages.map((function(e){switch(e.type){case"connecting":return Object(o.jsx)("li",{children:Object(o.jsx)("p",{className:"rounded-md bg-yellow-100 text-lg my-1 p-2",children:"Connecting to the chat room..."})},e.timestamp);case"joined":return Object(o.jsx)("li",{children:Object(o.jsxs)("p",{className:"rounded-md bg-green-100 text-lg my-1 p-2",children:[e.payload," joined the chat room!"]})},e.timestamp);case"exited":return Object(o.jsx)("li",{children:Object(o.jsxs)("p",{className:"rounded-md bg-red-100 text-lg my-1 p-2",children:[e.payload," quit the chat room!"]})},e.timestamp);case"error":return Object(o.jsx)("li",{children:Object(o.jsxs)("p",{className:"rounded-md bg-red-300 text-lg my-1 p-2",children:["Error: ",e.payload]})},e.timestamp);default:return""}}));return Object(o.jsx)("ul",{className:"flex-grow overflow-y-auto flex flex-col mx-6 md:mx-2",children:t})};var O=function(e){var t=e.onlineUsers,n=e.connectionMessages,s=e.isMobileViewOpen,c=e.setIsMobileViewOpen,r=(s?"fixed flex ":"hidden")+" top-0 left-0 min-w-full min-h-screen max-h-screen p-6 md:flex bg-black bg-opacity-25 z-50 md:relative md:min-h-0 md:p-0 md:min-w-300px md:max-w-50vw";return Object(o.jsx)("section",{className:r,children:Object(o.jsxs)("div",{className:"relative w-full bg-white rounded-md shadow-md py-2 px-6 md:px-3 flex flex-col\r md:rounded-none max-h-screen",children:[Object(o.jsx)("button",{type:"button",onClick:function(){return c((function(e){return!e}))},className:"absolute right-3 top-3 md:hidden",children:Object(o.jsx)("svg",{className:"w-8 h-8",fill:"black",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:Object(o.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),Object(o.jsx)("h4",{className:"text-center text-2xl font-semibold mb-3",children:"Users Online"}),Object(o.jsx)(f,{onlineUsers:t}),Object(o.jsx)("hr",{className:"my-1"}),Object(o.jsx)("h4",{className:"text-center text-2xl font-semibold mb-3",children:"Connection Status"}),Object(o.jsx)(g,{connectionMessages:n})]})})},v=n(8),w=n(49),y=n.n(w);var N=function(e,t){var n=t.setOnlineUsers,s=t.setPeopleCurrTyping,c=t.setMessages,r=t.setConnectionMessages,a=t.setPendingMessages,i=y()();r((function(e){return[].concat(Object(v.a)(e),[{type:"connecting",timestamp:(new Date).getTime()}])})),i.on("connect_error",(function(e){console.error("Error while connecting to websocket server. ".concat(e)),r((function(e){return[].concat(Object(v.a)(e),[{type:"error",timestamp:(new Date).getTime(),payload:"Unable to connect to server"}])}))})),i.on("connect",(function(){i.emit("set-username",e),i.emit("fetch-online-users")})),function(e,t,n){e.on("disconnected",(function(e){t((function(t){return t.filter((function(t){return t!==e}))})),n((function(t){return[].concat(Object(v.a)(t),[{type:"exited",timestamp:(new Date).getTime(),payload:e}])}))}))}(i,n,r),function(e,t){e.on("error",(function(e){t((function(t){return[].concat(Object(v.a)(t),[{type:"error",timestamp:(new Date).getTime(),payload:e}])}))}))}(i,r),function(e,t){e.on("fetch-online-users",(function(e){t(JSON.parse(e))}))}(i,n),function(e,t,n){e.on("joined",(function(e){t((function(t){return[].concat(Object(v.a)(t),[e])})),n((function(t){return[].concat(Object(v.a)(t),[{timestamp:(new Date).getTime(),type:"joined",payload:e}])}))}))}(i,n,r),function(e,t,n){e.on("message",(function(e){var s=JSON.parse(e),c=s.username,r=s.text,a=s.date;t((function(e){return e.filter((function(e){return e!==c}))})),n((function(e){return[].concat(Object(v.a)(e),[{isSelf:!1,username:c,date:new Date(a),text:r}])}))}))}(i,s,c),function(e,t,n,s){e.on("message-sent",(function(e){var c=JSON.parse(e),r=c.id,a=c.text,i=c.date;n((function(e){return e.filter((function(e){return e.id!=r}))})),s((function(e){return[].concat(Object(v.a)(e),[{isSelf:!0,username:t,date:new Date(i),text:a}])}))}))}(i,e,a,c),function(e,t){e.on("stop-typing",(function(e){t((function(t){return t.filter((function(t){return t!==e}))}))}))}(i,s),function(e,t){e.on("typing",(function(e){t((function(t){return-1!==t.indexOf(e)?t:[].concat(Object(v.a)(t),[e])}))}))}(i,s);var o=null,l=0,d=1;return i.emitTypingEvent=function(){(new Date).getTime()-l<2e3||(l=(new Date).getTime(),o&&clearTimeout(o),i.emit("typing"),o=setTimeout((function(){i.emit("stop-typing")}),1e4))},i.emitMessageEvent=function(t){t&&(o&&clearTimeout(o),a((function(n){return[].concat(Object(v.a)(n),[{id:d,username:e,text:t,date:new Date}])})),i.emit("message",JSON.stringify({text:t,id:d})),d++)},i};var M=function(){var e=Object(u.g)().username,t=Object(s.useState)({}),n=Object(d.a)(t,2),c=n[0],r=n[1],a=Object(s.useState)([]),i=Object(d.a)(a,2),l=i[0],m=i[1],x=Object(s.useState)([]),b=Object(d.a)(x,2),p=b[0],f=b[1],g=Object(s.useState)([]),v=Object(d.a)(g,2),w=v[0],y=v[1],M=Object(s.useState)([]),T=Object(d.a)(M,2),S=T[0],k=T[1],z=Object(s.useState)([]),C=Object(d.a)(z,2),V=C[0],D=C[1],_=Object(s.useState)(!1),L=Object(d.a)(_,2),E=L[0],R=L[1];return Object(s.useEffect)((function(){var t=N(e,{setOnlineUsers:m,setPeopleCurrTyping:f,setMessages:y,setConnectionMessages:k,setPendingMessages:D});return r(t),function(){t.disconnect(!0)}}),[e]),Object(o.jsxs)(s.Fragment,{children:[Object(o.jsxs)("main",{className:"flex flex-grow overflow-y-hidden",children:[Object(o.jsx)(h,{messages:w,pendingMessages:V,peopleThatAreTyping:p}),Object(o.jsx)(O,{onlineUsers:l,connectionMessages:S,isMobileViewOpen:E,setIsMobileViewOpen:R})]}),Object(o.jsx)(j,{username:e,emit_Message:c.emitMessageEvent,emit_On_Typing_Event:c.emitTypingEvent,setIsMobileViewOpen:R})]})};var T=function(){return Object(o.jsx)(i.a,{children:Object(o.jsxs)("div",{className:"min-h-screen max-h-screen flex flex-col",children:[Object(o.jsx)(l,{}),Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{exact:!0,path:"/",children:Object(o.jsx)(m,{})}),Object(o.jsx)(u.a,{exact:!0,path:"/chat/:username",children:Object(o.jsx)(M,{})})]})]})})};n(92);a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(T,{})}),document.getElementById("root"))}},[[93,1,2]]]);
//# sourceMappingURL=main.1f79f304.chunk.js.map